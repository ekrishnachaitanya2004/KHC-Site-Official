---
import { type CollectionEntry, getCollection } from "astro:content";
import SocialList from "@/components/SocialList.astro";
import PostPreview from "@/components/blog/PostPreview.astro";
import Note from "@/components/note/Note.astro";
import { getAllPosts } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";
import { collectionDateSort } from "@/utils/date";

// Posts
const MAX_POSTS = 10;
const allPosts = await getAllPosts();
const allPostsByDate = allPosts
	.sort(collectionDateSort)
	.slice(0, MAX_POSTS) as CollectionEntry<"post">[];

// Notes
const MAX_NOTES = 2;
const allNotes = await getCollection("note");
const latestNotes = allNotes.sort(collectionDateSort).slice(0, MAX_NOTES);
---

<PageLayout meta={{ title: "Home" }}>
	<!-- Hero section -->
	<!-- Background blur -->
	<div class="absolute top-0 left-1/2 md:top-[-15%] -ml-[50vw] min-h-screen w-screen pointer-events-none blur-3xl opacity-50 overflow-x-hidden">
		<div class="absolute top-[10%] right-[-40%] w-[65%] h-full bg-gradient-to-b from-purple-300 via-blue-300 to-transparent rounded-full opacity-30 dark:opacity-10"></div>
		<div class="absolute top-[10%] left-[-40%] w-[65%] h-full bg-gradient-to-b from-blue-300 via-pink-300 to-transparent rounded-full opacity-30 dark:opacity-10"></div>
		<div class="absolute top-[-20%] left-[-50%] w-[85%] h-full bg-gradient-to-b from-indigo-300 via-orange-300 to-transparent rounded-full opacity-60 dark:opacity-10"></div>
		<div class="absolute top-[-20%] right-[-50%] w-[85%] h-full bg-gradient-to-b from-orange-300 via-indigo-300 to-transparent rounded-full opacity-60 dark:opacity-10"></div>
	</div>
	<section class="max-w-xl mx-auto relative flex items-center justify-center h-screen -mt-24">
		<div class="w-full text-center">
			<span class="title text-3xl bg-gradient-to-r from-accent-two/85 via-accent-one/85 to-accent-two/85 dark:from-accent-two dark:via-accent-one dark:to-accent-two bg-clip-text text-transparent">
				This is Krypto Hashers Community!
			</span>
			<p class="mt-4 mb-4 text-lg font-medium">
				A collective of developers and researchers building the future in the open. We collaborate on wild ideas, explore experimental tech, and turn chaos into open-source innovation.			</p>
			<div class="flex justify-center mb-4">
				<SocialList />
			</div>
			<div class="flex justify-center space-x-4 mt-4">
				<a href="/posts/" class="relative flex items-center justify-center h-8 px-4 rounded-lg shadow-lg hover:brightness-110 transition-all bg-gradient-to-r from-accent-one to-accent-two">
					<span class="text-bgColor font-semibold">
						Read Blog
					</span>
				</a>

				<a href="/notes/wake-up/" class="relative flex items-center justify-center h-8 px-4 rounded-lg shadow-lg bg-special-lighter hover:brightness-110 hover:bg-special-lightest">
					<span class="bg-clip-text text-transparent font-semibold bg-gradient-to-r from-accent-one to-accent-two">
						Wake up
					</span>
				</a>
			</div>
		</div>
	</section>

	<!-- Our Story Section -->
	<section class="max-w-4xl mx-auto mb-16">
		<h2 class="title text-3xl md:text-4xl text-center mb-12">
			<span class="bg-gradient-to-r from-purple-500 via-accent-one to-accent-two dark:from-purple-400 dark:via-accent-one dark:to-accent-two bg-clip-text text-transparent">
				Our Story
			</span>
		</h2>
		<div class="grid md:grid-cols-2 gap-12">
			<div>
				<h3 class="text-2xl font-semibold mb-4 text-purple-500 dark:text-purple-400">Who We Are</h3>
				<p class="text-gray-700 dark:text-gray-300 mb-6">
					The Krypto Hashers Community, or just KHC, is not your typical open-source group chasing stars or clout. We're a raw, unfiltered group of devs who simply build things because we feel like it. This is a space for real developers solving real problems, not for applause, but for the sheer joy of creating.
				</p>
				<p class="text-gray-700 dark:text-gray-300 mb-6">
					Whether it's a bot that comments "bruh" when a build fails, or an automation script that reminds you to drink water at 3AM, we believe in building what we wish existed.
				</p>
				<p class="text-gray-700 dark:text-gray-300">
					KHC welcomes anyone—from the curious beginner who just wrote their first loop, to the senior dev who writes tools for fun in the middle of the night. We don't care Contact your tech stack, your years of experience, or how many stars your repo has. If you love creating, breaking, and learning, you belong here.
				</p>
			</div>
			<div>
				<h3 class="text-2xl font-semibold mb-4 text-blue-500 dark:text-blue-400">What We Believe</h3>
				<p class="text-gray-700 dark:text-gray-300 mb-6">
					We value collaboration over competition, questions over credentials, and ideas over perfection. Our discussions are wild, our projects are sometimes ridiculous, but our intentions are always sincere.
				</p>
				<p class="text-gray-700 dark:text-gray-300 mb-6">
					Whether you're building the next big automation, shipping a tool to help your workflow, or just adding memes to the README—we see you. And we're glad you're here.
				</p>
				<p class="text-gray-700 dark:text-gray-300 mb-6">
					KHC isn't a company. It's not a club. It's a mindset. One where chaos, curiosity, and creativity come together to form something truly meaningful.
				</p>
				<p class="text-gray-700 dark:text-gray-300">
					So if you've ever stayed up all night debugging something stupid, laughed at your own code, or wished you had people to just vibe with and learn from—welcome home. This is KHC.
				</p>
			</div>
		</div>
	</section>

	<!-- How It Started Section -->
	<section class="max-w-4xl mx-auto mb-16">
		<h2 class="title text-3xl md:text-4xl text-center mb-12">
			<span class="bg-gradient-to-r from-accent-two via-accent-one to-purple-500 dark:from-accent-two dark:via-accent-one dark:to-purple-400 bg-clip-text text-transparent">
				How It Started
			</span>
		</h2>
		<div class="max-w-3xl mx-auto">
			<p class="text-gray-700 dark:text-gray-300 mb-6">
				It all started in a small room, with me—just a regular developer, no team, no community—just a laptop, no chai, and a thousand bugs I couldn't solve. Every time I hit a wall, I'd head straight to Stack Overflow, searching endlessly through GitHub issues, hoping someone out there had already cried over the same problem.
			</p>
			<p class="text-gray-700 dark:text-gray-300 mb-6">
				Sometimes I found gold. Sometimes I found complete chaos. And then, I got stuck. So stuck that I stopped building. I gave up halfway through projects. I left ideas in folders, never opened again. That creative spark slowly dimmed, and I just couldn't get myself to open the terminal again.
			</p>
			<p class="text-gray-700 dark:text-gray-300 mb-6">
				But deep down, I still wanted to build. I still believed in the joy of making something out of nothing. One day, a random dev came across one of my old projects. He didn't just star it—he fixed a bug I left broken for months.
			</p>
			<p class="text-gray-700 dark:text-gray-300 mb-6">
				That one pull request brought everything back. We talked, we collaborated, we laughed at weird bugs together, and we slowly started building again. That's when it clicked: there must be more people like me.
			</p>
			<p class="text-gray-700 dark:text-gray-300 mb-6">
				People who love building but don't always have the energy to keep going alone. People who just need a little nudge, a teammate, a shared repo. That's how Krypto Hashers Community was born—not from plans or frameworks, but from burnout and revival. From silence and spark.
			</p>
			<p class="text-gray-700 dark:text-gray-300">
				Since 2021, we've been around—quietly messing with ideas, breaking stuff, fixing some of it, and making friends along the way. Now, we're ready to open our doors and say: if you've ever stopped building and wished someone would help you start again... this is your sign.
			</p>
		</div>
	</section>

	<!-- Posts Section -->
	<section aria-label="Blog post list" class="'mt-[-100vh] pt-[100vh]'">
		<h2 class="title mb-6 text-xl text-accent-two">
			<a href="/posts/">Posts</a>
		</h2>
		<ul class="space-y-4 md:space-y-2" role="list">
			{
				allPostsByDate.map((p) => (
					<li class="gap-2 sm:grid-cols-[auto_1fr]">
						<PostPreview post={p} />
					</li>
				))
			}
		</ul>
	</section>

	<!-- Notes Section -->
	{
		latestNotes.length > 0 && (
			<section class="mt-12">
				<h2 class="title mb-6 text-accent-two">
					<a href="/notes/">Notes</a>
				</h2>
				<div class="grid grid-cols-1 gap-8 sm:grid-cols-2">
					{
						latestNotes.map((note) => (
							<div>
								<Note note={note} as="h4" isPreview />
							</div>
						))
					}
				</div>
			</section>
		)
	}

	<!-- Debug -->
	<!--
	<div class="flex justify-between flex-wrap gap-y-1.5 mt-6 text-sm font-medium">
		<div class="text-center content-center h-10 w-10 bg-color-50"><span class="text-textColor">50</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-75"><span class="text-textColor">75</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-100"><span class="text-textColor">100</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-150"><span class="text-textColor">150</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-200"><span class="text-textColor">200</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-250"><span class="text-textColor">250</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-300"><span class="text-textColor">300</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-350"><span class="text-textColor">350</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-400">
			<span class="text-textColor">400</span>
			<span class="text-bgColor">400</span>
		</div>
		<div class="text-center content-center h-10 w-10 bg-color-450">
			<span class="text-textColor">450</span>
			<span class="text-bgColor">450</span>
		</div>
		<div class="text-center content-center h-10 w-10 bg-color-500">
			<span class="text-textColor">500</span>
			<span class="text-bgColor">500</span>
		</div>
		<div class="text-center content-center h-10 w-10 bg-color-550"><span class="text-bgColor">550</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-600"><span class="text-bgColor">600</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-650"><span class="text-bgColor">650</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-700"><span class="text-bgColor">700</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-750"><span class="text-bgColor">750</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-800"><span class="text-bgColor">800</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-850"><span class="text-bgColor">850</span></div>
		<div class="text-center content-center h-10 w-10 bg-color-900"><span class="text-bgColor">900</span></div>
	</div>
	-->
</PageLayout>

